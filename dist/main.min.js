!function(){"use strict";function t(){}t.prototype={init:function(t,s){console.log(t,s)},preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.game.state.start("preloader")}},window.test2=window.test2||{},window.test2.Boot=t}(),function(){"use strict";function t(s){return console.log(s),s>=4e6?s:s%2!==0?s:t(s-1)+t(s-2)}function s(){}var i=t(1);console.log(i),s.prototype={create:function(){this.turnStart=!0,this.turnNumber=0,this.turnTime=1.5*Phaser.Timer.SECOND,this.turnMusic=0,this.musicNumber=0,this.syncPlayWithMusic=!1,this.actorAction=!1,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.background=this.game.add.sprite(0,0,"mountains"),this.game.world.setBounds(0,0,1800,500),this.platforms=this.game.add.group(),this.platform1=this.game.add.sprite(200,300,"platform"),this.game.physics.arcade.enable(this.platform1),this.platform1.body.allowGravity=!1,this.platform1.body.immovable=!0,this.platform1.body.checkCollision.down=!1,this.platform1.body.checkCollision.left=!1,this.platform1.body.checkCollision.right=!1,this.platforms.add(this.platform1),this.actors=this.game.add.group();for(var t=1;5>t;t++)this.sprite=this.game.add.sprite(100+300*t,100,"guy"),this.sprite.actor=!0,this.game.physics.enable(this.sprite,Phaser.Physics.ARCADE),this.sprite.physicsData={veloX:0,veloY:0,ID:t,SPEED:20,GRAVITY:500,MAX_SPEED:500,SHOOT:5e3,action:!1,attack:"jump"},this.sprite.anchor.setTo(.5,.5),this.sprite.scale.setTo(2.5),this.animation=this.sprite.animations.add("walk",[0]),this.animation_attack=this.sprite.animations.add("attack",[1,2,3,4]),this.animation.play(10,!0),this.sprite.inputEnabled=!0,this.sprite.input.start(0,!0),this.sprite.input.priorityID=1,this.sprite.events.onInputDown.add(this.clickedSprite,this),this.sprite.events.onInputUp.add(this.releaseSprite,this),this.sprite.body.collideWorldBounds=!0,this.sprite.body.gravity.y=this.sprite.physicsData.GRAVITY,this.sprite.body.setSize(20,55,-2,20),this.sprite.body.bounce.set(.2),this.sprite.body.drag.set(20,20),this.sprite.body.moves=!1,this.actors.add(this.sprite);this.bitmap=this.game.add.bitmapData(this.game.world.width,this.game.world.height),this.bitmap.context.fillStyle="rgb(255, 255, 255)",this.bitmap.context.strokeStyle="rgb(255, 255, 255)",this.game.add.image(0,0,this.bitmap),this.pauseLabel=this.game.add.text(this.game.width-100,20,"play",{font:"28px Arial",fill:"#fff"}),this.pauseLabel.inputEnabled=!0,this.pauseLabel.events.onInputDown.add(this.playInit,this),this.samp1=this.game.add.audio("samp1"),this.samp2=this.game.add.audio("samp2"),this.samp3=this.game.add.audio("gSamp1"),this.samp4=this.game.add.audio("gSamp2"),this.samp5=this.game.add.audio("gSamp3"),this.samps=[this.samp1,this.samp2,this.samp3,this.samp4,this.samp5],this.game.sound.setDecodedCallback(this.samps,this.startMusic,this),this.currentMusicLoop=this.samp5,this.cursors=this.game.input.keyboard.createCursorKeys(),this.input.onDown.add(this.click,this),this.game.time.events.add(1e3,this.pause,this)},update:function(){this.game.physics.arcade.collide(this.actors,this.actors,this.friendsCollide,null,this),this.game.physics.arcade.collide(this.actors,this.platforms,this.actorsWithEnviroment,null,this),this.turnStart===!1||(this.actors.forEach(function(t){this.actor=t,this.actor.physicsData.action===!0&&this.action(this.actor)},this),this.pause()),this.cursors.up.isDown&&(this.game.camera.y-=8),this.cursors.down.isDown&&(this.game.camera.y+=8),this.cursors.left.isDown&&(this.game.camera.x-=16),this.cursors.right.isDown&&(this.game.camera.x+=16)},drawTrajectory:function(t,s,i){for(this.actor=t,this.theta=s,this.calc=this.trajectoryCalculations(this.actor,this.theta),this.bitmap.context.clearRect(0,0,this.game.world.width,this.game.world.height),this.bitmap.context.fillStyle="jump"===this.actor.physicsData.attack?"rgba(255, 255, 255, 0.5)":"rgba(255, 0, 0, 0.5)",this.calc.t;this.calc.t<1;this.calc.t+=.03)this.calc.x=-this.calc.velocity*this.calc.t*Math.cos(this.theta)*this.calc.correctionFactor,this.calc.y=this.calc.velocity*this.calc.t*Math.sin(this.theta)*this.calc.correctionFactor-.5*this.actor.physicsData.GRAVITY*this.calc.t*this.calc.t,this.bitmap.context.fillRect(this.calc.x+this.actor.x,this.actor.y-this.calc.y,3,3);i||"jump"!==this.actor.attack?(i||"dash"!==this.actor.attack)&&(i||"shoot"!==this.actor.attack)&&!i&&"sword"===this.actor.attack:this.jump(this.actor,this.theta,this.calc.velocity),this.bitmap.dirty=!0},click:function(t,s){this.cP=t,this.mE=s,this.actorAction&&(this.actorAction=!1)},clickedSprite:function(t,s){this.actor=t,this.pointer=s,this.actor.alpha=.5,this.actor.physicsData.action=!0,this.actorAction=!0,this.actor.attack="jump"},releaseSprite:function(t,s){console.log(t,s),this.actor=t,this.releasedMPointer=s,this.actor.physicsData.attack="shoot"},action:function(t){this.actor=t,this.theta=this.game.physics.arcade.angleToPointer(this.actor),this.drawTrajectory(this.actor,this.theta,this.actorAction)},jump:function(t,s,i){this.actor=t,this.theta=s,this.velocity=i,this.actor.physicsData.veloX=-Math.cos(this.theta)*this.velocity,this.actor.physicsData.veloY=-Math.sin(this.theta)*this.velocity,this.actor.physicsData.action=!1,this.actor.alpha=1},shoot:function(t,s,i){this.actor=t,this.theta=theata,this.v=i},trajectoryCalculations:function(t,s){return this.actor=t,this.SPEED="jump"===this.actor.physicsData.attack?this.actor.physicsData.SPEED:this.actor.physicsData.SHOOT,this.MAX_SPEED="jump"===this.actor.physicsData.attack?this.actor.physicsData.MAX_SPEED:this.actor.physicsData.SHOOT,this.inputX=this.game.input.activePointer.x+this.game.camera.x,this.inputY=this.game.input.activePointer.y+this.game.camera.y,this.actorX=this.actor.x,this.actorY=this.actor.y,this.v=this.calculateVelcity(this.inputX,this.inputY,this.actorX,this.actorY,this.actor.physicsData.SPEED,this.actor.physicsData.MAX_SPEED),{i:this.actor.z,x:0,y:0,t:0,correctionFactor:.99,velocity:this.v}},calculateVelcity:function(t,s,i,a,e,h){return this.answer=Math.sqrt((t-i)*(t-i)+(s-a)*(s-a))*e,this.maxSpeed=h,this.answer>=this.maxSpeed?this.maxSpeed:this.answer},playInit:function(){this.syncPlayWithMusic=!0},play:function(){this.turnStart=!1,this.syncPlayWithMusic=!1,this.turnNumber++,this.music(),this.actors.forEach(function(t){this.actor=t,this.actor.body.moves=!0,this.actor.body.velocity.setTo(this.actor.physicsData.veloX,this.actor.physicsData.veloY),this.actor.body.gravity.y=this.actor.physicsData.GRAVITY},this),this.game.time.events.add(this.turnTime,this.pause,this)},pause:function(){this.turnStart===!1&&(this.turnStart=!0,this.actors.forEach(function(t){this.actor=t,this.actor.physicsData.veloX=t.body.velocity.x,this.actor.physicsData.veloY=t.body.velocity.y,this.actor.body.moves=!1,this.actor.body.velocity.setTo(0,0)},this))},startMusic:function(){this.samps.shift(),this.samp1.loopFull(.1),this.samp1.onLoop.add(this.music,this)},music:function(){12===this.musicNumber&&this.turnMusic%8===0?(this.currentMusicLoop.stop(),this.currentMusicLoop=this.samp3,this.currentMusicLoop.play(),this.musicNumber++):2===this.musicNumber&&this.turnMusic%8===0?(this.currentMusicLoop.stop(),this.currentMusicLoop=this.samp4,this.currentMusicLoop.loopFull(),this.musicNumber=0,this.turnMusic--):this.turnMusic%8===0&&0===this.musicNumber&&(this.currentMusicLoop.stop(),this.currentMusicLoop=this.samp5,this.currentMusicLoop.loopFull(),this.musicNumber++),this.turnMusic++,this.syncPlayWithMusic&&this.play()},friendsCollide:function(t,s){t.body.velocity.x=-1e3,s.body.velocity.x=1e3},actorsWithEnviroments:function(t,s){this.actor=t,this.enviroment=s},render:function(){this.actors.forEach(function(t){this.game.debug.body(t)},this)}},window.test2=window.test2||{},window.test2.Game=s}(),window.addEventListener("load",function(){"use strict";var t=window.test2,s="hello",i=new Phaser.Game(640,480,Phaser.AUTO,"test2-game");i.state.add("boot",t.Boot,s),i.state.add("preloader",t.Preloader),i.state.add("menu",t.Menu),i.state.add("game",t.Game),i.state.start("boot",!0,!1,"hello",gameAPI)},!1),gameAPI={a:"hello",speed:20,sayHey:function(){alert(a)}},function(){"use strict";function t(){}var s=void 0;t.prototype={create:function(){var t=this.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.input.onDown.add(this.onDown,this),console.log(s)},update:function(){},onDown:function(){this.game.state.start("game",!0,!1,"hello",42)}},window.test2=window.test2||{},window.test2.Menu=t}(),function(){"use strict";function t(){this.asset=null,this.ready=!1}t.prototype={preload:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.loadResources(),this.ready=!0},loadResources:function(){this.load.image("ball","assets/ball.png"),this.load.spritesheet("guy","assets/animations1.png",32,65,60),this.load.image("mountains","assets/mountainsA.png"),this.load.image("platform","assets/platform.png"),this.game.load.audio("samp1","assets/samp1.mp3"),this.game.load.audio("samp2","assets/samp2.mp3"),this.game.load.audio("gSamp1","assets/guitar_samp1.mp3"),this.game.load.audio("gSamp2","assets/guitar_samp2.mp3"),this.game.load.audio("gSamp3","assets/guitar_samp3.mp3")},create:function(){},update:function(){this.game.state.start("menu")},onLoadComplete:function(){}},window.test2=window.test2||{},window.test2.Preloader=t}();